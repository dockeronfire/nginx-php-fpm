# Архитектура образа

Мы используем **supervisor** для запуска процессов Nginx и PHP-FPM внутри контейнера. Помимо этого в образе
установлено ПО, которое может быть полезно широкому кругу проектов на PHP, например, mysql-client, ssmtp,
cron, composer, certbot, git, openssh-client и др.

## Файловая система

| Путь                         | Значение                                                                                                                                                                                               |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `/etc/supervisord.conf`      | Главный конфиг supervisor                                                                                                                                                                              |
| `/etc/supervisor/conf.d/`    | В данной директории вы можете размещать конфиги для запуска собственных процессов в supervisor                                                                                                         |
| `/etc/nginx`                 | Директория конфигурации Nginx                                                                                                                                                                          |
| `/etc/nginx/vhost.common.d`  | В данной директории вы можете размещать свои файлы для расширения конфигурации виртуального сервера в Nginx                                                                                            |
| `/usr/local/etc/php/conf.d/` | Директория конфигурации PHP-FPM                                                                                                                                                                        |
| `/etc/ssmtp`                 | Директория конфигурации sSMTP, файлы конфигурации создаются автоматически ([подробнее](./configure.md))                                                                                                |
| `/opt/spaceonfire`           | Директория скриптов, конфигураций, пресетов и прочего для образа                                                                                                                                       |
| `/var/www/html`              | Корневая директория веб-сервера по-умолчанию                                                                                                                                                           |
| `/var/www/html/scripts`      | В данной директории вы можете разместить скрипты, которые необходимо выполнить перед запуском сервера. Используйте номера в качестве префикса для контроля порядка выполнения скриптов (`00,01,..,99`) |
